apply plugin: 'java'
apply plugin: 'maven'

sourceCompatibility = JavaVersion.VERSION_1_8
targetCompatibility = JavaVersion.VERSION_1_8


dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
    implementation 'com.google.auto.service:auto-service:1.0-rc2'
    annotationProcessor 'com.google.auto.service:auto-service:1.0-rc6'
    implementation 'com.squareup:javapoet:1.10.0'
    implementation project(':annotation')
}


def group = 'com.baidu.adt'
def version = ANNOTATION_PROCESSOR_VERSION
def artifactId = "no-adapter-annotation-processor"
def env

task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = 'sources'
}

artifacts {
    archives sourcesJar
}
def mavenUsername = ""
def mavenPassword = ""
if (hasProperty('mavenUsername')) mavenUsername = getProperty('mavenUsername')
if (hasProperty('mavenPassword')) mavenPassword = getProperty('mavenPassword')
uploadArchives {
    repositories {
        mavenDeployer {
            env = version.endsWith('SNAPSHOT') ? 'Baidu_Local_Snapshots' : 'Baidu_Local'
            repository(url: "http://maven.baidu-int.com/nexus/content/repositories/$env") {
                authentication(userName: mavenUsername, password: mavenPassword)
            }
            pom.version = version
            pom.artifactId = artifactId
            pom.groupId = group
        }
    }
}