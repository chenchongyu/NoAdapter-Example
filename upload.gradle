/*
 * Copyright (C) 2021 Baidu, Inc. All Rights Reserved.
 */
apply plugin: 'maven'
def group = 'com.baidu.adt'
def env

task sourcesJar(type: Jar) {
    from android.sourceSets.main.java.srcDirs
    classifier = 'sources'
}

artifacts {
    archives sourcesJar
}
def mavenUsername = ""
def mavenPassword = ""
if (hasProperty('mavenUsername')) mavenUsername = getProperty('mavenUsername')
if (hasProperty('mavenPassword')) mavenPassword = getProperty('mavenPassword')
uploadArchives {
    repositories {
        mavenDeployer {
            env = version.endsWith('SNAPSHOT') ? 'Baidu_Local_Snapshots' : 'Baidu_Local'
            repository(url: "http://maven.baidu-int.com/nexus/content/repositories/$env") {
                authentication(userName: mavenUsername, password: mavenPassword)
            }
            println("ext is--->$ext.getProperties()")
            pom.version = ext.version
            pom.artifactId = ext.artifactId
            pom.groupId = group
        }
    }
}